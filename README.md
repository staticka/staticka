# Staticka

[![Latest Version on Packagist][ico-version]][link-packagist]
[![Software License][ico-license]][link-license]
[![Build Status][ico-build]][link-build]
[![Coverage Status][ico-coverage]][link-coverage]
[![Total Downloads][ico-downloads]][link-downloads]

[Staticka](https://staticka.github.io) is an extensible PHP-based static site generator. It converts [Markdown](https://en.wikipedia.org/wiki/Markdown) content and PHP template files into static HTML.

> [!WARNING]
> The entire codebase of this package is being migrated to [rougin/staticka](https://github.com/rougin/staticka). To prevent backward compatibility breaks transitioning to the new package, the functionalities on this package should stay as it is based on its documentation below. However, this package will be marked as deprecated once the migration is fully completed. It is also recommended to change the code to the new package.

## Installation

Install `Staticka` via [Composer](https://getcomposer.org/):

``` bash
$ composer require staticka/staticka
```

## Basic Usage

### Compiling Markdown files

Create a new file named `index.md`:

```
<!-- index.md -->

# Hello World!

This is a sample Markdown file.
```

Then load the `.md` file as a `Page` class to the `Website` instance:

``` php
// index.php

use Staticka\Factories\PageFactory;

// Initialize the factory for creating pages ---
$factory = new PageFactory;
// ---------------------------------------------

$site = new Staticka\Website;

// Load the file as a Page class -------------
$page = $factory->file(__DIR__ . '/index.md');
// -------------------------------------------

$site->add($page);

$site->build(__DIR__ . '/public');
```

To compile the pages, run the `php index.php` command:

``` bash
$ php index.php
```

To see the output, open `public/index.html` in a web browser.

``` html
<!-- public/index.html -->

<h1>Hello World!</h1>
<p>This is a sample Markdown file.</p>
```

### Adding Front Matter and additional data

Staticka supports [Front Matter](https://jekyllrb.com/docs/frontmatter) in which can add predefined variables in a specific content:

```
<!-- index.md -->

---
link: brave-world
---

# Hello World!

This is a sample Markdown file.
```

> [!NOTE]
> Special variables like `path`, `link`, and `title` are also generated by default but can be overwritten inside the content.

Running the script below should display the HTML content in the specified file:

``` bash
$ php index.php
```

``` html
<!-- build/brave-world/index.html -->

<h1>Hello World!</h1>
<p>This is a sample Markdown file.</p>
```

#### Page properties

The page properties that will be used by Staticka can be found on `Staticka\Contracts\PageContract`:

``` php
// Content of the page
PageContract::DATA_BODY = 'body';

// Specific name of the page
PageContract::DATA_NAME = 'name';

// The URL path of the page
PageContract::DATA_LINK = 'link';

// File path of the template
PageContract::DATA_PLATE = 'plate';

// Title heading for the page
PageContract::DATA_TITLE = 'title';
```

## Customization

### Filters

Staticka can use filters to modify the contents of the specified page. Creating filters require an instance to be implemented in [`FilterContract`](https://github.com/staticka/staticka/blob/master/src/Contracts/FilterContract.php):

``` php
// index.php

use Staticka\Factories\PageFactory;
use Staticka\Filter\HtmlMinifier;

// NOTE: Add filters in the Layout instance ---
$layout = new Staticka\Layout;
// --------------------------------------------

$layout->filter(new HtmlMinifier);

$factory = new PageFactory($layout);

// ...
```

``` bash
$ php index.php
```

``` html
<!-- build/brave-world/index.html -->

<h1>Hello World!</h1><p>This is a sample Markdown file.</p>
```

### Helpers

Helpers can be used in putting methods inside template files. It must also be implemented in [`HelperContract`](https://github.com/staticka/staticka/blob/master/src/Contracts/HelperContract.php) when creating a new helper:

```
<!-- index.md -->

---
link: brave-world
layout: layout
---

# Hello World!

This is a sample Markdown file.
```

``` html
<!-- layout.php -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title><?php echo $title; ?></title>
</head>
<body>
  <p><?php echo $url->set('hello'); ?></p>
  <?php echo $content; ?>
</body>
</html>
```

``` php
// index.php

use Staticka\Factories\PageFactory;
use Staticka\Helpers\LinkHelper;

// NOTE: Add filters in the Layout instance ---
$layout = new Staticka\Layout;
// --------------------------------------------

// Create an instance of LinkHelper ---
$site = 'https://staticka.github.io';

$helper = new LinkHelper($site);
// ------------------------------------

$layout->helper($helper);

$factory = new PageFactory($layout);

// ...
```

``` bash
$ php index.php
```

``` html
<!-- build/brave-world/index.html -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hello World!</title>
</head>
<body>
  <p>https://staticka.github.io/hello</p>
  <h1>Hello World!</h1>
<p>This is a sample Markdown file.</p></body>
</html>
```

## Changelog

Please see [CHANGELOG][link-changelog] for more information what has changed recently.

## Testing

``` bash
$ composer test
```

## Credits

- [All contributors][link-contributors]

## License

The MIT License (MIT). Please see [LICENSE][link-license] for more information.

[ico-build]: https://img.shields.io/github/actions/workflow/status/staticka/staticka/build.yml?style=flat-square
[ico-coverage]: https://img.shields.io/codecov/c/github/staticka/staticka?style=flat-square
[ico-downloads]: https://img.shields.io/packagist/dt/staticka/staticka.svg?style=flat-square
[ico-license]: https://img.shields.io/badge/license-MIT-brightgreen.svg?style=flat-square
[ico-version]: https://img.shields.io/packagist/v/staticka/staticka.svg?style=flat-square

[link-build]: https://github.com/staticka/staticka/actions
[link-changelog]: https://github.com/staticka/staticka/blob/master/CHANGELOG.md
[link-contributors]: https://github.com/staticka/staticka/contributors
[link-coverage]: https://app.codecov.io/gh/staticka/staticka
[link-downloads]: https://packagist.org/packages/staticka/staticka
[link-license]: https://github.com/staticka/staticka/blob/master/LICENSE.md
[link-packagist]: https://packagist.org/packages/staticka/staticka