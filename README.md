# Staticka

[![Latest Version on Packagist][ico-version]][link-packagist]
[![Software License][ico-license]][link-license]
[![Build Status][ico-build]][link-build]
[![Coverage Status][ico-coverage]][link-coverage]
[![Total Downloads][ico-downloads]][link-downloads]

Inspired by popular static site generators like [Hugo](https://gohugo.io) and [Jekyll](https://jekyllrb.com), [Staticka](https://staticka.github.io) is an extensible PHP-based static site generator. It mainly converts [Markdown](https://en.wikipedia.org/wiki/Markdown) content and PHP template files into static HTML.

## Installation

Install `Staticka` via [Composer](https://getcomposer.org/):

``` bash
$ composer require staticka/staticka
```

## Basic Usage

**NOTE**: The usage below only consists on how to use Staticka as a library and not as a commonly used static site generator. For the applications that this library is being used, kindly check [Console](https://github.com/staticka/console) or [Expresso](https://github.com/staticka/expresso).

### Compiling Markdown files

Create a new file named `index.md`:

**index.md**

```
# Hello World!

This is a sample Markdown file.
```

Then add it as a page to `Staticka` instance:

**index.php**

``` php
use Staticka\Factories\PageFactory;

$factory = new PageFactory;

$site = new Staticka\Website;

$file = __DIR__ . '/index.md';

$site->add($factory->file($file));

$site->build(__DIR__ . '/public');
```

To compile the pages, run the `php index.php` command:

``` bash
$ php index.php
```

To see the output, open `public/index.html` in a web browser.

**public/index.html**

``` html
<h1>Hello World!</h1>
<p>This is a sample Markdown file.</p>
```

### Adding Front Matter and additional data

Staticka supports [Front Matter](https://jekyllrb.com/docs/frontmatter) in which can add predefined variables in a specific content. Special variables like `path`, `link`, and `title` are also generated by default but can be overwritten inside the content.

**index.md**

```
---
link: brave-world
---

# Hello World!

This is a sample Markdown file.
```

**build/brave-world/index.html** (after running `php index.php` in the terminal)

``` html
<h1>Hello World!</h1>
<p>This is a sample Markdown file.</p>
```

#### Page properties

The page properties that will be used by Staticka can be found on `Staticka\Contracts\PageContract`:

``` php
// Content of the page
PageContract::DATA_BODY = 'body';
// Specific name of the page
PageContract::DATA_NAME = 'name';
// The URL path of the page
PageContract::DATA_LINK = 'link';
// File path of the template
PageContract::DATA_PLATE = 'plate';
// Title heading for the page
PageContract::DATA_TITLE = 'title';
```

## Customization

### Filters

Staticka can use filters to modify the contents of the specified page. Creating filters require an instance to be implemented in [`FilterContract`](https://github.com/staticka/staticka/blob/master/src/Contracts/FilterContract.php).

**index.php**

``` php
use Staticka\Factories\PageFactory;
use Staticka\Filter\HtmlMinifier;

// NOTE: Add filters in the Layout instance
$layout = new Staticka\Layout;

$layout->filter(new HtmlMinifier);

$factory = new PageFactory($layout);

$site = new Staticka\Website;

$file = __DIR__ . '/index.md';

$site->add($factory->file($file));

$site->build(__DIR__ . '/public');
```

**build/brave-world/index.html** (after running `php index.php` in the terminal)

``` html
<h1>Hello World!</h1><p>This is a sample Markdown file.</p>
```

### Helpers

Helpers can be used in putting methods inside template files. It must also be implemented in [`HelperContract`](https://github.com/staticka/staticka/blob/master/src/Contracts/HelperContract.php) when creating a new helper.

**index.md**

```
---
link: brave-world
layout: layout
---

# Hello World!

This is a sample Markdown file.
```

**layout.php**

``` html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title><?php echo $title; ?></title>
</head>
<body>
  <p><?php echo $url->set('hello'); ?></p>
  <?php echo $content; ?>
</body>
</html>
```

**index.php**

``` php
use Staticka\Factories\PageFactory;
use Staticka\Helpers\LinkHelper;

// NOTE: Add helpers in the Layout instance
$layout = new Staticka\Layout;

$helper = new LinkHelper('https://staticka.github.io');

$layout->helper($helper);

$factory = new PageFactory($layout);

$site = new Staticka\Website;

$file = __DIR__ . '/index.md';

$site->add($factory->file($file));

$site->build(__DIR__ . '/public');
```

**build/brave-world/index.html** (after running `php index.php` in the terminal)

``` html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hello World!</title>
</head>
<body>
  <p>https://staticka.github.io/hello</p>
  <h1>Hello World!</h1>
<p>This is a sample Markdown file.</p></body>
</html>
```

## Changelog

Please see [CHANGELOG][link-changelog] for more information what has changed recently.

## Testing

``` bash
$ composer test
```

## Credits

- [All contributors][link-contributors]

## License

The MIT License (MIT). Please see [LICENSE][link-license] for more information.

[ico-build]: https://img.shields.io/github/actions/workflow/status/staticka/staticka/build.yml?style=flat-square
[ico-coverage]: https://img.shields.io/codecov/c/github/staticka/staticka?style=flat-square
[ico-downloads]: https://img.shields.io/packagist/dt/staticka/staticka.svg?style=flat-square
[ico-license]: https://img.shields.io/badge/license-MIT-brightgreen.svg?style=flat-square
[ico-version]: https://img.shields.io/packagist/v/staticka/staticka.svg?style=flat-square

[link-build]: https://github.com/staticka/staticka/actions
[link-changelog]: https://github.com/staticka/staticka/blob/master/CHANGELOG.md
[link-contributors]: https://github.com/staticka/staticka/contributors
[link-coverage]: https://app.codecov.io/gh/staticka/staticka
[link-downloads]: https://packagist.org/packages/staticka/staticka
[link-license]: https://github.com/staticka/staticka/blob/master/LICENSE.md
[link-packagist]: https://packagist.org/packages/staticka/staticka